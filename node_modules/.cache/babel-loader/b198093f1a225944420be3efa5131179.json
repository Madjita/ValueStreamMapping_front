{"ast":null,"code":"var _jsxFileName = \"/Users/sergeismogliuk/Documents/Project/Project_node/Diplom/react-diplom/react-diplom/src/components/ListView/ListView.js\";\nimport React from 'react';\nimport ListItem from \"./ListItem\";\nimport { Conxtext, ListActiveConsumer } from \"../../ListActiveContextProvider\";\nimport { MidleContentContext, MidleContentConsumer } from \"../../providers/MidleContextProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ListView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this._showChoices = contextMidleContent => {\n      this.contextMidleContent = contextMidleContent; //Инициализация Context в Middle\n\n      if (this.context.ListActive.length === 0) {\n        this.contextMidleContent.toggle({\n          id: 0,\n          name: \"\"\n        }); //Передача данных по Context в Middle\n      }\n\n      return this.context.ListActive.map((item, i) => {\n        return /*#__PURE__*/_jsxDEV(ListItem, {\n          title: item.choice_name,\n          checked: item.isChecked,\n          size: 50,\n          onIconPress: () => {},\n          onPress: () => {\n            this.context.ListActive.map((item2, j) => {\n              item2.isSelected = false;\n            });\n            item.isSelected = true;\n\n            this._updateListView();\n\n            this.contextMidleContent.toggle({\n              id: 0,\n              name: item.choice_name\n            }); //Передача данных по Context в Middle\n          },\n          isSelected: this.context.ListActive[i].isSelected,\n          MyKey: item.choice_id\n        }, item.choice_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 13\n        }, this);\n      });\n    };\n\n    this.escFunction = this.escFunction.bind(this);\n    this.state = {\n      selected: false\n    };\n  }\n\n  _updateListView() {\n    this.setState({\n      selected: !this.state.selected\n    });\n  }\n\n  escFunction(event) {\n    let list = this.context.ListActive;\n    let object = list.find(item => item.isSelected === true);\n\n    if (object === undefined) {\n      if (list.length > 0) {\n        list[0].isSelected = true;\n        this.contextMidleContent.toggle({\n          id: 0,\n          name: list[0].choice_name\n        }); //Передача данных по Context в Middle\n\n        this._updateListView();\n      }\n\n      return;\n    }\n\n    let position = list.indexOf(object);\n\n    switch (event.keyCode) {\n      case 38:\n        {\n          if (position - 1 < 0) {\n            break;\n          }\n\n          if (position < list.length) {\n            object.isSelected = false;\n            list[position - 1].isSelected = true;\n            this.contextMidleContent.toggle({\n              id: 0,\n              name: list[position - 1].choice_name\n            }); //Передача данных по Context в Middle\n          } else {\n            object.isSelected = false;\n          }\n\n          this._updateListView();\n\n          break;\n        }\n\n      case 40:\n        {\n          if (position + 1 >= list.length) {\n            break;\n          }\n\n          if (position < list.length) {\n            object.isSelected = false;\n            list[position + 1].isSelected = true;\n            this.contextMidleContent.toggle({\n              id: 0,\n              name: list[position + 1].choice_name\n            }); //Передача данных по Context в Middle\n          } else {\n            object.isSelected = false;\n          }\n\n          this._updateListView();\n\n          break;\n        }\n    }\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount\");\n    document.addEventListener(\"keydown\", this.escFunction, false);\n  }\n\n  componentWillUnmount() {\n    console.log(\"componentWillUnmount\");\n    document.removeEventListener(\"keydown\", this.escFunction, false);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ListActiveConsumer, {\n        children: context => /*#__PURE__*/_jsxDEV(MidleContentConsumer, {\n          children: contextMidleContent => /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: this._showChoices(contextMidleContent)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nListView.contextType = Conxtext;\nListView.contextMidleContent = MidleContentContext;\nexport default ListView;","map":{"version":3,"sources":["/Users/sergeismogliuk/Documents/Project/Project_node/Diplom/react-diplom/react-diplom/src/components/ListView/ListView.js"],"names":["React","ListItem","Conxtext","ListActiveConsumer","MidleContentContext","MidleContentConsumer","ListView","PureComponent","constructor","props","_showChoices","contextMidleContent","context","ListActive","length","toggle","id","name","map","item","i","choice_name","isChecked","item2","j","isSelected","_updateListView","choice_id","escFunction","bind","state","selected","setState","event","list","object","find","undefined","position","indexOf","keyCode","componentDidMount","console","log","document","addEventListener","componentWillUnmount","removeEventListener","render","contextType"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport ListItem from \"./ListItem\"\n\nimport  {Conxtext,ListActiveConsumer} from \"../../ListActiveContextProvider\"\n\nimport  {MidleContentContext,MidleContentConsumer} from \"../../providers/MidleContextProvider\"\n\nclass ListView extends React.PureComponent {\n    constructor(props) {\n      super(props);\n      this.escFunction = this.escFunction.bind(this);\n      this.state = {\n        selected: false,\n      }\n    }\n\n    static contextType = Conxtext\n    static contextMidleContent = MidleContentContext\n\n    _updateListView()\n    {\n      this.setState({ selected: !this.state.selected});\n    }\n\n    _showChoices = (contextMidleContent) => {\n\n      this.contextMidleContent = contextMidleContent //Инициализация Context в Middle\n\n      if(this.context.ListActive.length === 0)\n      {\n        this.contextMidleContent.toggle({id:0,name:\"\"}) //Передача данных по Context в Middle\n      }\n\n      return this.context.ListActive.map((item, i) => {\n        return (\n            <ListItem\n                title={item.choice_name}\n                checked={item.isChecked}\n                size={50}\n                onIconPress={() => {}}\n                onPress={() => {\n\n                  this.context.ListActive.map((item2,j) =>{\n                    item2.isSelected = false;\n                  });\n                  item.isSelected = true;\n                  this._updateListView()\n\n                  this.contextMidleContent.toggle({id:0,name:item.choice_name}) //Передача данных по Context в Middle\n\n                }}\n                isSelected={this.context.ListActive[i].isSelected}\n                key={item.choice_id}\n                MyKey = {item.choice_id}\n            />\n        );\n      });\n    };\n\n    escFunction(event){\n      \n      let list = this.context.ListActive;\n      let object = list.find(item => item.isSelected === true)\n\n      if(object === undefined)\n      {\n        if(list.length > 0)\n        { \n          list[0].isSelected = true;\n          this.contextMidleContent.toggle({id:0,name:list[0].choice_name}) //Передача данных по Context в Middle\n          this._updateListView()\n        }\n\n        return;\n      }\n      let position = list.indexOf(object)\n      \n      switch(event.keyCode)\n      {\n        case 38:\n        {\n            if(position-1 < 0)\n            {\n              break;\n            }\n          \n            if(position < list.length )\n            {\n              object.isSelected = false;\n              list[position-1].isSelected = true;\n              this.contextMidleContent.toggle({id:0,name:list[position-1].choice_name}) //Передача данных по Context в Middle\n            }\n            else\n            {\n              object.isSelected = false;\n            }\n            this._updateListView()\n            break;\n        }\n\n        case 40:\n        {\n\n            if(position+1 >= list.length)\n            {\n              break;\n            }\n\n            if(position < list.length)\n            {\n              object.isSelected = false;\n              list[position+1].isSelected = true;\n              this.contextMidleContent.toggle({id:0,name:list[position+1].choice_name}) //Передача данных по Context в Middle\n            }\n            else\n            {\n              object.isSelected = false;\n            }\n            this._updateListView()\n          break;\n        }\n      }\n\n      \n      \n    }\n    componentDidMount(){\n      console.log(\"componentDidMount\")\n      document.addEventListener(\"keydown\", this.escFunction, false);\n    }\n    componentWillUnmount(){\n      console.log(\"componentWillUnmount\")\n      document.removeEventListener(\"keydown\", this.escFunction, false);\n    }\n\n    render() {\n      return (\n        <div>\n          <ListActiveConsumer>\n          {context => (\n            <MidleContentConsumer>\n              {contextMidleContent => (\n                <ul>{this._showChoices(contextMidleContent)}</ul>\n              )}\n              </MidleContentConsumer>\n          )}\n          </ListActiveConsumer>  \n        </div>\n      );\n    }\n  }\n\n  export default ListView;"]},"metadata":{},"sourceType":"module"}
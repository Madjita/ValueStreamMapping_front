{"ast":null,"code":"var _jsxFileName = \"/Users/sergeismogliuk/Documents/Project/Project_node/Diplom/react-diplom/react-diplom/src/components/Diagrams/Diagram.js\";\nimport React from \"react\";\nimport { DiagramComponent, HierarchicalTree, MindMap, RadialTree, ComplexHierarchicalTree, DataBinding, Snapping, PrintAndExport, BpmnDiagrams, SymmetricLayout, ConnectorBridging, UndoRedo, LayoutAnimation, DiagramContextMenu, ConnectorEditing, Inject, SnapConstraints, DiagramTools, NodeConstraints } from \"@syncfusion/ej2-react-diagrams\";\nimport { AccumulationChartComponent, AccumulationSeriesCollectionDirective, AccumulationSeriesDirective, AccumulationDataLabel, PieSeries, AccumulationLegend, AccumulationTooltip } from '@syncfusion/ej2-react-charts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet diagramInstance = DiagramComponent;\nlet lineChart;\nlet columnChart;\nlet pie;\nlet lGrid;\nlet predicateStart;\nlet predicateEnd;\nlet predicate;\nlet acclegendSettings = {\n  visible: false\n};\n\nclass Diagram extends React.PureComponent {\n  constructor(_props) {\n    super(_props);\n    this.diagramInstance = diagramInstance;\n\n    this.diagramTemplate = props => {\n      console.log(props.id);\n\n      if (props.id === \"pie\") {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Hello\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this);\n      }\n    };\n\n    this.state = {\n      myStyle: _props.myStyle,\n      diagram: _props.diagram,\n      connectors: _props.connectors\n    };\n  }\n\n  // A node is created and stored in nodes array.\n  async api(ip, port, command) {\n    // GET request using fetch with async/await\n    const response = await fetch(\"http://\" + ip + \":\" + port + command);\n    const data = await response.json();\n    return data;\n  }\n\n  async create_customer(element) {\n    let http = \"http://\" + window.ip + \":\" + window.port;\n    console.log(\"element\", element.oldProperties.id);\n\n    switch (element.oldProperties.id) {\n      case \"Customer\":\n        {//api/reason_customer/insert/:Node_name_id/:offsetX/:offsetY\"\n          //const response = await fetch(http+\"/api/reason_customer/insert/\"+element.properties.id+\"/\"+element.properties.offsetX+\"/\"+element.properties.offsetY)\n          //const data = await response;\n          //return data\n        }\n\n      case \"Process\":\n        {\n          break;\n        }\n\n      case \"External_Shipment\":\n        {\n          break;\n        }\n\n      case \"Inventory_customer_supplier\":\n        {\n          break;\n        }\n\n      case \"Production_control\":\n        {\n          break;\n        }\n    }\n  }\n\n  update_position(element) {\n    var myData = [];\n    element.map(item => {\n      myData.push({\n        id: item.properties.id,\n        offsetX: item.properties.offsetX,\n        offsetY: item.properties.offsetY\n      });\n    }); //console.log(JSON.stringify(myData))\n    //api/reason_customer/insert/:Node_name_id/:offsetX/:offsetY\"\n\n    let http = \"http://\" + window.ip + \":\" + window.port; //fetch(http+\"/api/vsm/update_position/\")\n    //.then(response => response.json());\n  }\n\n  render() {\n    const {\n      myStyle\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(DiagramComponent, {\n      id: \"diagram\",\n      ref: diagram => diagramInstance = diagram,\n      width: '100%',\n      height: '100%',\n      snapSettings: {\n        constraints: SnapConstraints.None\n      } // Add node\n      ,\n      nodes: this.state.diagram,\n      connectors: this.state.connectors,\n      drop: e => {\n        //console.log(\"drop\",e)\n        //console.log(\"drop length\",e.element.annotations.length)\n        this.create_customer(e.element); //e.element.annotations[0].content = \"#1\"\n        //e.newValue[0].annotations[0].content = \"#1\"\n      },\n      positionChange: e => {\n        switch (e.state) {\n          case \"Completed\":\n            {\n              console.log(\"position\", e.source.nodes);\n              if (e.source.nodes !== undefined) this.update_position(e.source.nodes);\n              break;\n            }\n\n          case \"Progress\":\n            {\n              break;\n            }\n\n          case \"Start\":\n            {\n              break;\n            }\n        }\n      },\n      dragTargetEnd: e => {\n        console.log(\"dragTargetEnd\", e);\n      },\n      tool: DiagramTools.ZoomPan\n      /* selectionChange={(e)=>{\n       \n         console.log(\"SELECT\",e.newValue)\n       }}*/\n      ,\n      created: () => {\n        //console.log(diagramInstance.getActiveLayer())\n        //this.diagramInstance.getActiveLayer();\n        // diagramInstance.tool = DiagramTools.ZoomPan;\n        //diagramInstance.dataBind();\n        diagramInstance.scrollChange = args => {\n          //Obtains the pan status\n          let panStatus = args.panState;\n        }; //diagramInstance.tool = DiagramTools.ZoomPan;\n        //diagramInstance.dataBind();\n\n        /*diagramInstance.scrollChange = { args: IScrollChangeEventArgs => {\n        //Obtains the pan status\n        console.log(IScrollChangeEventArgs)\n        let panStatus = IScrollChangeEventArgs.panState;}}\n        }*/\n\n      } //Disables mouse over tooltip at runtime\n      ,\n      tooltip: null,\n      style: myStyle,\n      nodeTemplate: this.diagramTemplate,\n      children: /*#__PURE__*/_jsxDEV(Inject, {\n        width: '200px',\n        height: '200px',\n        services: [HierarchicalTree, MindMap, RadialTree, ComplexHierarchicalTree, DataBinding, Snapping, PrintAndExport, BpmnDiagrams, SymmetricLayout, ConnectorBridging, UndoRedo, LayoutAnimation, DiagramContextMenu, ConnectorEditing]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Diagram;","map":{"version":3,"sources":["/Users/sergeismogliuk/Documents/Project/Project_node/Diplom/react-diplom/react-diplom/src/components/Diagrams/Diagram.js"],"names":["React","DiagramComponent","HierarchicalTree","MindMap","RadialTree","ComplexHierarchicalTree","DataBinding","Snapping","PrintAndExport","BpmnDiagrams","SymmetricLayout","ConnectorBridging","UndoRedo","LayoutAnimation","DiagramContextMenu","ConnectorEditing","Inject","SnapConstraints","DiagramTools","NodeConstraints","AccumulationChartComponent","AccumulationSeriesCollectionDirective","AccumulationSeriesDirective","AccumulationDataLabel","PieSeries","AccumulationLegend","AccumulationTooltip","diagramInstance","lineChart","columnChart","pie","lGrid","predicateStart","predicateEnd","predicate","acclegendSettings","visible","Diagram","PureComponent","constructor","props","diagramTemplate","console","log","id","state","myStyle","diagram","connectors","api","ip","port","command","response","fetch","data","json","create_customer","element","http","window","oldProperties","update_position","myData","map","item","push","properties","offsetX","offsetY","render","constraints","None","e","source","nodes","undefined","ZoomPan","scrollChange","args","panStatus","panState"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { \n  DiagramComponent,\n  HierarchicalTree,\n  MindMap,\n  RadialTree,\n  ComplexHierarchicalTree,\n  DataBinding,\n  Snapping,\n  PrintAndExport,\n  BpmnDiagrams,\n  SymmetricLayout,\n  ConnectorBridging,\n  UndoRedo,\n  LayoutAnimation,\n  DiagramContextMenu,\n  ConnectorEditing,\n  Inject,\n  SnapConstraints,\n  DiagramTools,\n  NodeConstraints\n} from \"@syncfusion/ej2-react-diagrams\";\n\nimport { AccumulationChartComponent, AccumulationSeriesCollectionDirective, AccumulationSeriesDirective, AccumulationDataLabel, PieSeries, AccumulationLegend, AccumulationTooltip } from '@syncfusion/ej2-react-charts';\n\n\n\nlet diagramInstance = DiagramComponent;\n\n\nlet lineChart;\nlet columnChart;\nlet pie;\nlet lGrid;\nlet predicateStart;\nlet predicateEnd;\nlet predicate;\n\n\nlet acclegendSettings = { visible: false };\n\n\nclass Diagram extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n          myStyle: props.myStyle,\n          diagram: props.diagram,\n          connectors: props.connectors,\n        };\n\n       \n      }\n      diagramInstance =  diagramInstance;\n      // A node is created and stored in nodes array.\n\n\n      async api(ip,port,command) {\n        // GET request using fetch with async/await\n        const response = await fetch(\"http://\"+ip+\":\"+port+command);\n        const data = await response.json();\n        return data\n      }\n\n\n      async create_customer(element)\n      {\n        let http = \"http://\"+window.ip+\":\"+window.port\n        console.log(\"element\",element.oldProperties.id);\n\n        switch(element.oldProperties.id)\n        {\n          case \"Customer\":{\n            //api/reason_customer/insert/:Node_name_id/:offsetX/:offsetY\"\n        \n            //const response = await fetch(http+\"/api/reason_customer/insert/\"+element.properties.id+\"/\"+element.properties.offsetX+\"/\"+element.properties.offsetY)\n            //const data = await response;\n            //return data\n          }\n          case \"Process\":{\n            break;\n          }\n          case \"External_Shipment\":{\n            break;\n          }\n          case \"Inventory_customer_supplier\":\n          {\n              break;\n          }\n          case \"Production_control\":\n          {\n              break;\n          }\n        }\n\n        \n        \n      }\n\n     update_position(element)\n      {\n        var myData = []\n        element.map(item =>{\n          myData.push({\n            id: item.properties.id,\n            offsetX: item.properties.offsetX,\n            offsetY: item.properties.offsetY\n          })\n        })\n\n        //console.log(JSON.stringify(myData))\n        //api/reason_customer/insert/:Node_name_id/:offsetX/:offsetY\"\n        let http = \"http://\"+window.ip+\":\"+window.port\n        //fetch(http+\"/api/vsm/update_position/\")\n        //.then(response => response.json());\n      }\n\n\n\n      diagramTemplate =(props) =>{\n        console.log(props.id)\n        if (props.id === \"pie\") {\n            return (\n            <div>\n              Hello\n            </div>);\n        }\n    }\n\n       \n      \n\n      render() {\n\n        const {myStyle} = this.state\n\n\n        return (\n        <DiagramComponent  id=\"diagram\" ref={diagram => (diagramInstance = diagram)}\n        width = {'100%'}\n        height = {'100%'}\n        snapSettings={{ constraints: SnapConstraints.None }}\n        // Add node\n        nodes = {\n          this.state.diagram\n        }\n        connectors = {\n          this.state.connectors\n        }\n\n        drop={(e)=>{\n          //console.log(\"drop\",e)\n          //console.log(\"drop length\",e.element.annotations.length)\n          this.create_customer(e.element)\n          //e.element.annotations[0].content = \"#1\"\n        \n          //e.newValue[0].annotations[0].content = \"#1\"\n        }}\n\n        positionChange={(e)=>{\n\n          switch(e.state)\n          {\n            case \"Completed\":{\n              console.log(\"position\",e.source.nodes)\n              if(e.source.nodes !== undefined)\n                this.update_position(e.source.nodes)\n            \n            break;  }\n            case \"Progress\":{break;}\n            case \"Start\":{break;}\n          }\n          \n\n          \n        }}\n\n        dragTargetEnd={(e)=>{\n          console.log(\"dragTargetEnd\",e)\n        }}\n\n        \n        tool = {\n          DiagramTools.ZoomPan\n      }\n\n        \n       /* selectionChange={(e)=>{\n        \n          console.log(\"SELECT\",e.newValue)\n        }}*/\n        created = {\n          () => {\n\n            //console.log(diagramInstance.getActiveLayer())\n            //this.diagramInstance.getActiveLayer();\n\n\n           // diagramInstance.tool = DiagramTools.ZoomPan;\n            //diagramInstance.dataBind();\n            diagramInstance.scrollChange = args => {\n            //Obtains the pan status\n            let panStatus = args.panState;\n           }\n\n \n            //diagramInstance.tool = DiagramTools.ZoomPan;\n            //diagramInstance.dataBind();\n            /*diagramInstance.scrollChange = { args: IScrollChangeEventArgs => {\n            //Obtains the pan status\n            console.log(IScrollChangeEventArgs)\n            let panStatus = IScrollChangeEventArgs.panState;}}\n            }*/\n          }\n        }\n\n            //Disables mouse over tooltip at runtime\n            tooltip = {\n              null\n          }\n\n\n          style = {myStyle}\n          nodeTemplate={this.diagramTemplate}\n        \n\n       >\n         <Inject  width = {'200px'}\n        height = {'200px'}\n  services={[\n    HierarchicalTree,\n    MindMap,\n    RadialTree,\n    ComplexHierarchicalTree,\n    DataBinding,\n    Snapping,\n    PrintAndExport,\n    BpmnDiagrams,\n    SymmetricLayout,\n    ConnectorBridging,\n    UndoRedo,\n    LayoutAnimation,\n    DiagramContextMenu,\n    ConnectorEditing\n  ]}\n/>\n       </DiagramComponent>);\n      }\n}\n\n\nexport default Diagram;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}
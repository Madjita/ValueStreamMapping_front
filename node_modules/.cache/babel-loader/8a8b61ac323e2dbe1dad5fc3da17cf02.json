{"ast":null,"code":"var _jsxFileName = \"/Users/sergeismogliuk/Documents/Project/My_experience/New_project_diplom/front/src/Component/Card/Buffer.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { styled } from '@material-ui/core/styles';\nimport Triangle from './Triangle';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport axios from 'axios';\nimport ip from '../../global';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Buffer = props => {\n  _s();\n\n  var _information$buffer, _information$buffer2;\n\n  const Colors = {\n    RED: 'red',\n    GREEN: 'green',\n    YELLOW: 'yellow',\n    WHITE: 'white',\n    Header: '#6495ed'\n  };\n  const {\n    name,\n    max,\n    minHold,\n    valueDefault,\n    type,\n    value\n  } = props.buffer;\n  const ExpandMore = styled(props => {\n    const {\n      expand,\n      ...other\n    } = props;\n    return /*#__PURE__*/_jsxDEV(IconButton, { ...other\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 16\n    }, this);\n  })(({\n    theme,\n    expand\n  }) => ({\n    transform: !expand ? 'rotate(0deg)' : 'rotate(180deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  }));\n  const [expanded, setExpanded] = React.useState(true);\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const [information, setInformation] = useState({\n    buffer: new Object(),\n    show: true\n  });\n  const [color, setColor] = useState('#d3d3d3');\n\n  const fetchInfo = async () => {\n    const response = await axios.post('http://' + ip + ':5001/api/manufacture/updateInfoBuf', props.buffer, {\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        'Content-Type': 'application/json'\n      }\n    });\n\n    if (response.status === 200) {\n      let data = response.data;\n      let ex = data.bufferVSMQueue.map(item => {\n        var f = props.orderItems.filter(o => o.id === item.currentOrderItems.id)[0];\n\n        if (f.id === item.currentOrderItems.id) {\n          return item;\n        }\n      });\n      data.bufferVSMQueue = ex; //console.log(\"es =\",ex,data.bufferVSMQueue)\n\n      return data;\n    }\n  }; ///\n\n\n  useEffect(() => {\n    let isActive = true;\n    fetchInfo().then(data => {\n      if (isActive) setInformation({ ...information,\n        buffer: data\n      });\n    });\n    return () => {\n      isActive = false;\n    };\n  }, [information]);\n  let orderItems;\n\n  if (((_information$buffer = information.buffer) === null || _information$buffer === void 0 ? void 0 : _information$buffer.bufferVSMQueue) != undefined || ((_information$buffer2 = information.buffer) === null || _information$buffer2 === void 0 ? void 0 : _information$buffer2.bufferVSMQueue) != null) {\n    var _information$buffer3;\n\n    ///\n    orderItems = (_information$buffer3 = information.buffer) === null || _information$buffer3 === void 0 ? void 0 : _information$buffer3.bufferVSMQueue.map((item, index) => {\n      var time = moment.unix(item.currentOrderItems.tActual).utc().format('H:m:s'); // var time = \"00:00:00\"\n      //console.log(\"saad = \", item);\n\n      if (item === undefined) {\n        return;\n      } //borderRight: '1px solid rgba(0, 0, 21, 0.125)'\n\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: color\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            fontWeight: 'bold'\n          },\n          children: [\"\\u041F\\u0430\\u0440\\u0442\\u0438\\u044F \", item.currentOrderItems.orders_production.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-around'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u2116 \\u0422\\u0435\\u043A\\u0443\\u0449\\u0435\\u0433\\u043E \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0412\\u0441\\u0435\\u0433\\u043E \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-around'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.currentOrderItems.part\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.currentOrderItems.orders_production.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center'\n          },\n          children: \"\\u041E\\u0431\\u0449\\u0435\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            fontWeight: 'bold'\n          },\n          children: [time, \" \\u0441\\u0435\\u043A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      minWidth: '150px',\n      verticalAlign: 'middle'\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      action: /*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"settings\",\n        children: /*#__PURE__*/_jsxDEV(SettingsIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }, this),\n      title: name,\n      sx: {\n        fontWeight: 'bold',\n        color: 'white',\n        backgroundColor: Colors.Header,\n        paddingBottom: '0px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        fontSize: '1rem',\n        backgroundColor: Colors.Header,\n        color: 'white',\n        display: 'flex',\n        justifyContent: 'space-around'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0412\\u0440\\u0435\\u043C\\u044F \\u0446\\u0438\\u043A\\u043B\\u0430:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"55\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      style: {\n        padding: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          margin: 0\n        },\n        children: [\" \", max]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Triangle, {\n        buff: {\n          name: name,\n          minHold: minHold,\n          max: max,\n          value: value,\n          valueDefault: valueDefault\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n      disableSpacing: true,\n      sx: {\n        padding: 0,\n        margin: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(ExpandMore, {\n        expand: expanded,\n        onClick: handleExpandClick,\n        \"aria-expanded\": expanded,\n        \"aria-label\": \"show more\",\n        children: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n      sx: {\n        margin: 0,\n        padding: 0,\n        display: 'grid'\n      },\n      in: expanded,\n      timeout: \"auto\",\n      collapsedSize: 0,\n      unmountOnExit: true,\n      children: orderItems\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Buffer, \"Y69NzRng1WOJp78+n1DFDPp5HyU=\");\n\n_c = Buffer;\nexport default Buffer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Buffer\");","map":{"version":3,"sources":["/Users/sergeismogliuk/Documents/Project/My_experience/New_project_diplom/front/src/Component/Card/Buffer.tsx"],"names":["React","useEffect","useState","styled","Triangle","Card","CardHeader","CardContent","IconButton","ExpandMoreIcon","CardActions","Collapse","SettingsIcon","axios","ip","moment","Buffer","props","Colors","RED","GREEN","YELLOW","WHITE","Header","name","max","minHold","valueDefault","type","value","buffer","ExpandMore","expand","other","theme","transform","marginLeft","transition","transitions","create","duration","shortest","expanded","setExpanded","handleExpandClick","information","setInformation","Object","show","color","setColor","fetchInfo","response","post","headers","status","data","ex","bufferVSMQueue","map","item","f","orderItems","filter","o","id","currentOrderItems","isActive","then","undefined","index","time","unix","tActual","utc","format","backgroundColor","display","justifyContent","fontWeight","orders_production","part","quantity","minWidth","verticalAlign","paddingBottom","fontSize","padding","margin"],"mappings":"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","sourcesContent":["import React,{useEffect, useState} from 'react'\nimport { styled } from '@material-ui/core/styles';\n\nimport Triangle from './Triangle'\n\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport IconButton from '@material-ui/core/IconButton'\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport IDataBufferVSM from '../Data/IDataBufferVSM';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport {IconButtonProps} from '@material-ui/core/IconButton'\n\nimport Typography from '@material-ui/core/Typography';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport IDataOrderItem from '../Data/IDataOrderItem'\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport axios from 'axios'\n\nimport ip from '../../global'\nimport IDatabufferVSMQueue from '../Data/IDatabufferVSMQueue';\nimport IDataOrder from '../Data/IDataOrder';\nimport OrderRole from '../Data/OrderRole';\nimport moment from 'moment'\n\ninterface ExpandMoreProps extends IconButtonProps {\n    expand: boolean;\n}\n\n  \n\nconst Buffer = (props:{buffer: IDataBufferVSM, orderItems: IDataOrderItem[]}) => {\n\n    const Colors = { RED: 'red', GREEN: 'green', YELLOW: 'yellow', WHITE: 'white', Header: '#6495ed'};\n\n     const {\n      name,\n      max,\n      minHold,\n      valueDefault,\n      type,\n      value\n    } = props.buffer;\n\n    const ExpandMore = styled((props: ExpandMoreProps) => {\n        const { expand, ...other } = props;\n        return <IconButton {...other} />;\n      })(({ theme, expand }) => ({\n        transform: !expand ? 'rotate(0deg)' : 'rotate(180deg)',\n        marginLeft: 'auto',\n        transition: theme.transitions.create('transform', {\n          duration: theme.transitions.duration.shortest,\n        }),\n      }));\n\n    const [expanded, setExpanded] = React.useState(true);\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const [information, setInformation] = useState({\n      buffer: new Object as IDataBufferVSM,\n      show: true\n    });\n\n    const [color,setColor] = useState('#d3d3d3');\n\n\n\n   const fetchInfo  = async() =>{\n    const response = await axios.post('http://'+ip+':5001/api/manufacture/updateInfoBuf',props.buffer,\n    {\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          'Content-Type': 'application/json'\n        }\n    })\n\n    if(response.status === 200)\n    {\n      let data = response.data as IDataBufferVSM;\n\n\n      let ex  = data.bufferVSMQueue.map((item: IDatabufferVSMQueue)=>{\n        var f = props.orderItems.filter(o=> o.id === item.currentOrderItems.id)[0] as IDataOrderItem\n        \n        \n        if(f.id === item.currentOrderItems.id)\n        {\n          return item\n        }\n      })\n\n\n      data.bufferVSMQueue = ex as IDatabufferVSMQueue[];\n\n     //console.log(\"es =\",ex,data.bufferVSMQueue)\n\n\n\n\n      return data;\n    }\n    \n   }\n   ///\n\n   useEffect(() => {\n    let isActive = true;\n    fetchInfo().then(data => {\n      if (isActive) setInformation({...information, buffer: data as IDataBufferVSM});\n    });\n    return () => { isActive = false };\n  }, [information])\n\n\n\n   \n   let orderItems;\n\n   if(information.buffer?.bufferVSMQueue != undefined || information.buffer?.bufferVSMQueue != null)\n   {\n   ///\n\n\n     orderItems =  information.buffer?.bufferVSMQueue.map((item: IDatabufferVSMQueue, index: number) =>{\n        var time = moment.unix(item.currentOrderItems.tActual as number).utc().format('H:m:s')\n       // var time = \"00:00:00\"\n  \n        //console.log(\"saad = \", item);\n\n        if(item === undefined)\n        {\n          return;\n        }\n    \n\n\n        //borderRight: '1px solid rgba(0, 0, 21, 0.125)'\n        return(\n          <div key={index} style={{backgroundColor: color}}>\n                <p style={{display: 'flex', justifyContent:'center', fontWeight: 'bold'}} >Партия {item.currentOrderItems.orders_production.id}</p>\n                <div style={{display: 'flex', justifyContent:'space-around'}} >\n                  <p>№ Текущего заказа</p>\n                  <p>Всего заказов</p>\n                </div>\n                <div style={{display: 'flex', justifyContent:'space-around'}} >\n                  <p >{item.currentOrderItems.part}</p>\n                  <p >{item.currentOrderItems.orders_production.quantity}</p>\n                </div>\n                <p style={{display: 'flex', justifyContent:'center'}} >Общее время</p>\n                <p style={{display: 'flex', justifyContent:'center', fontWeight: 'bold'}}>{time} сек</p>\n          </div>\n        )\n      })\n\n    }\n      \n\n    return(\n        <Card sx={{ minWidth: '150px',verticalAlign: 'middle'}}>\n            <CardHeader\n                action={\n                    <IconButton aria-label=\"settings\">\n                    <SettingsIcon />\n                    </IconButton>\n                }\n                title={name}\n                sx={{fontWeight: 'bold', color:'white', backgroundColor: Colors.Header,paddingBottom: '0px'}}>\n            </CardHeader>\n            <div  style={{fontWeight: 'bold',fontSize:'1rem',backgroundColor: Colors.Header,color: 'white', display: 'flex', justifyContent: 'space-around'}}>\n              <p>Время цикла:</p>\n              <p>55</p>\n            </div>\n            <CardContent style={{padding: 1}}>\n                    <p style={{display: 'flex', justifyContent:'center', margin: 0}}> {max}</p>\n                    <Triangle buff={{name: name, minHold: minHold, max: max,value: value,valueDefault: valueDefault} as IDataBufferVSM}/>\n            </CardContent>\n            <CardActions disableSpacing sx={{padding: 0, margin: 0}}>\n                <ExpandMore\n                    expand={expanded}\n                    onClick={handleExpandClick}\n                    aria-expanded={expanded}\n                    aria-label=\"show more\"\n                >\n                  <ExpandMoreIcon />\n                </ExpandMore>\n            </CardActions>\n            <Collapse sx={{margin: 0, padding: 0, display: 'grid'}} in={expanded} timeout=\"auto\" collapsedSize={0} unmountOnExit>\n              {orderItems}\n            </Collapse>\n        </Card>\n    )\n\n}\n\n\nexport default Buffer;"]},"metadata":{},"sourceType":"module"}
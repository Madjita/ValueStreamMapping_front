{"ast":null,"code":"var _jsxFileName = \"/Users/sergeismogliuk/Documents/Project/Project_node/Diplom/react-diplom/react-diplom/src/components/Container/MidleContainer/MidleContent/MidleContent.js\";\nimport React from \"react\";\nimport MidleContentStyle from \"./MidleContentStyle\";\nimport DiagramViewBox from \"../../../Diagrams/DiagramViewBox\"; //import  {ListActiveConxtext} from \"../../../../ListActiveContextProvider\"\n\nimport Triangle from \"../../../SVG/Triangle/Triangle\";\nimport Buffer from \"../../../Buffer/Buffer\";\nimport Etap from \"../../../Etap/Etap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar savePositionOnMouseDown = {\n  x: 0,\n  y: 0\n};\nvar difference = {\n  x: 0,\n  y: 0\n};\nvar mouseZoomPosition = {\n  x: 0,\n  y: 0\n};\nvar pressTimer = undefined;\nvar longpress = {\n  countCLick: 0,\n  time: 0\n};\n\nclass MidleContent extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this._showCard = () => {\n      if (this.context.ListActive.length === 0) {\n        return /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"MidleContent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 20\n        }, this);\n      }\n\n      let object = this.context.ListActive.find(item => item.isSelected === true);\n      console.log(\"this._showCard(context)\", this.context);\n      return /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: object.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 18\n      }, this);\n    };\n\n    this.getCoords = elem => {\n      let box = elem.getBoundingClientRect();\n      console.log(this.MidleContentStyle.pageYOffset);\n      return {\n        top: Math.round(box.top),\n        //pageYOffset\n        left: Math.round(box.left) //pageXOffset\n\n      };\n    };\n\n    this.handleOnWhell = e => {\n      //let count = (e.deltaY/17)\n      let target = this.MidleContentStyle; //e.target.closest('....'); // Здесь что-то уникальное, что может указать на род. блок\n\n      let targetCoords = target.getBoundingClientRect();\n      let originX;\n      let originY;\n      let scale = this.state.scale;\n      const wheel = e.deltaY < 0 ? 1 : -1; //e.preventDefault()\n      // Compute zoom factor.\n\n      let zoom; // = Math.exp(wheel * this.state.scale);\n\n      console.log(\"wheel = \", wheel);\n\n      if (wheel > 0) {\n        zoom = scale - 0.05;\n\n        if (zoom < 0.65) {\n          zoom = 0.65; //originX = 0;\n          //originY = 0;\n        } else {\n          originX = (e.clientX - targetCoords.left) / scale;\n          originY = (e.clientY - targetCoords.top) / scale;\n        }\n      } else {\n        zoom = scale + 0.05;\n        originX = (e.clientX - targetCoords.left) / scale;\n        originY = (e.clientY - targetCoords.top) / scale;\n      }\n\n      this.setState({\n        scale: zoom,\n        originX: mouseZoomPosition.x,\n        originY: mouseZoomPosition.y\n      }); //,x: e.screenX, y: e.screenY\n\n      /* switch (e.deltaY > 0) {\n           case true:\n             console.log('positive',e.deltaY,count);\n             let plus = this.state.scale+0.05\n              this.setState({scale: zoom,originX: -originX, originY: -originY }) //,x: xCoord, y: yCoord\n             break;\n           default:\n             console.log('negative',e.deltaY,count);\n             count *=(-1)\n              let minus = this.state.scale-0.05\n             if(minus < 0 )\n             {\n               minus = 0\n             }\n             \n         }*/\n    };\n\n    this.handleOnMouseMove = e => {\n      let target = this.MidleContentStyle;\n      let position = this.getTransformedPoint(target, e.clientX, e.clientY, this.state.scale); //let difference = 0;\n\n      switch (e.button) {\n        case 1:\n          difference = {\n            x: savePositionOnMouseDown.x - position.x,\n            y: savePositionOnMouseDown.y - position.y\n          }; //console.log(\"handleOnMouseMove = \",difference,e,e.buttons)\n\n          console.log(\"origin = \", savePositionOnMouseDown, \" newPosition = \", position, \" dif = \", difference, \"Scale = \", this.state.scale);\n          this.setState({\n            DragPostion: {\n              x: this.state.DragPostion.x - difference.x,\n              y: this.state.DragPostion.y - difference.y\n            }\n          });\n          break;\n\n        default:\n          this.setState({//originX: position.x ,\n            // originY: position.y \n          });\n          break;\n      }\n\n      mouseZoomPosition = {\n        x: position.x,\n        y: position.y\n      }; //console.log(target.getBoundingClientRect(),\"pos =\",position )\n      //this.setState({ mouseX: position.x, mouseY: position.y,originX: difference.x,originY: difference.y });\n    };\n\n    this.isMetaKey = e => {\n      return navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey;\n    };\n\n    this.getTransformedPoint = (target, x, y, scale) => {\n      let targetCoords = target.getBoundingClientRect();\n      const transformedX = (x - targetCoords.left) / scale; //target.firstChild.scrollLeft\n\n      const transformedY = (y - targetCoords.top) / scale; //target.firstChild.scrollTop\n\n      return {\n        x: transformedX,\n        y: transformedY\n      };\n    };\n\n    this.handleOnClick = e => {\n      return;\n      let originX;\n      let originY;\n      let newX;\n      let newY;\n      let target = this.MidleContentStyle;\n      let position = this.getTransformedPoint(target, e.clientX, e.clientY, this.state.scale);\n      let targetCoords = this.DIV.getBoundingClientRect();\n      console.log(target.getBoundingClientRect(), targetCoords);\n      let position2 = {\n        x: (e.clientX - targetCoords.left) / this.state.scale,\n        y: (e.clientY - targetCoords.top) / this.state.scale\n      };\n      console.log(position, position2, {\n        x: e.clientX,\n        y: e.clientY\n      });\n      newX = position.x;\n      newY = position.y;\n      originX = position2.x; //*this.state.scale;\n\n      originY = position2.y; //*this.state.scale;\n\n      this.setState({\n        x: newX,\n        y: newY,\n        originX: originX,\n        originY: originY,\n        divX: originX,\n        divY: originY\n      }); //\n    };\n\n    this.handleMouseDown = e => {\n      switch (e.button) {\n        case 1:\n          let target = this.MidleContentStyle;\n          savePositionOnMouseDown = this.getTransformedPoint(target, e.clientX, e.clientY, this.state.scale);\n          console.log(\"handleMouseDown = \", savePositionOnMouseDown, e);\n          longpress.time = 0;\n          pressTimer = window.setInterval(function () {\n            // your code here\n            longpress.time++;\n          }, 100);\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.handleMouseUp = e => {\n      console.log(\"handleMouseUp\");\n      clearTimeout(pressTimer); //clear time on mouseup\n\n      console.log(\"click = \", e.button);\n\n      switch (e.button) {\n        case 1:\n          {\n            switch (longpress.countCLick) {\n              case 0:\n                if (longpress.time < 2) longpress.countCLick++;\n                break;\n\n              case 1:\n                if (longpress.time < 2) {\n                  longpress.countCLick = 0;\n                  longpress.time = 0;\n                  console.log(\"DOUBLE CLICK\");\n                  this.setState({\n                    scale: 1,\n                    originX: 0,\n                    originY: 0,\n                    DragPostion: {\n                      x: 0,\n                      y: 0\n                    }\n                  });\n                }\n\n                break;\n\n              default:\n                break;\n            }\n\n            longpress.time = 0;\n            break;\n          }\n      }\n    };\n\n    this.handleDoubleClick = e => {//console.log(\" handleDoubleClick click = \",e.button)\n    };\n\n    this.state = {\n      error: null,\n      isLoaded: false,\n      scale: 1,\n      x: 0,\n      y: 0,\n      originX: 0,\n      originY: 0,\n      DragPostion: {\n        x: 0,\n        y: 0\n      },\n      divX: 0,\n      divY: 0,\n      mouseX: 0,\n      mouseY: 0\n    };\n  }\n\n  //translate(\"+this.state.x+\"px,\"+this.state.y+\"px)\n  //transformOrigin:this.state.xScale+\"px \"+this.state.yScale+\"px\"\n  //transformOrigin:this.state.originX+\"px \"+this.state.originY+\"px\",\n  //  \"scale(\"+this.state.scale+\")\"\n  //overflow: \"auto\"\n  render() {\n    return /*#__PURE__*/_jsxDEV(MidleContentStyle, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          position: \"relative\",\n          overflow: \"hidden\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: DIV => {\n            this.DIV = DIV;\n          },\n          onDoubleClick: this.handleDoubleClick,\n          onClick: this.handleOnClick,\n          onMouseDown: this.handleMouseDown,\n          onMouseUp: this.handleMouseUp,\n          onMouseMove: this.handleOnMouseMove,\n          onWheel: this.handleOnWhell,\n          style: {\n            width: \"100%\",\n            height: \"100%\",\n            position: \"absolute\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: MidleContentStyle => {\n              this.MidleContentStyle = MidleContentStyle;\n            },\n            style: {\n              position: \"absolute\",\n              width: 1411 + \"px\",\n              height: 1100 + \"px\",\n              top: \"0px\",\n              left: \"0px\",\n              transformOrigin: this.state.originX + \"px \" + this.state.originY + \"px\",\n              //transformOrigin:\"0px 0px\",\n              transform: \"translate(\" + this.state.DragPostion.x + \"px, \" + this.state.DragPostion.y + \"px) scale(\" + this.state.scale + \")\",\n              pointerEvents: \"all\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"500px\",\n                top: 1411 / 2 + \"px\",\n                left: 1100 / 2 + \"px\",\n                pointerEvents: \"all\",\n                position: \"absolute\",\n                boxShadow: \"rgba(0,0,0,0.2) 0px 3px 5px -1px,rgba(0,0,0,0.14) 0px 6px 10px 0px,rgba(0,0,0,0.12) 0px 1px 14px 0px\" //transform: \"translate(\"+this.state.originX+\"px, \"+this.state.originY+\"px) scale(\"+this.state.scale+\")\"\n\n              },\n              children: [/*#__PURE__*/_jsxDEV(Triangle, {\n                left: 200,\n                top: 200,\n                width: 100,\n                height: 100,\n                min: 50,\n                max: 100,\n                value: 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Triangle, {\n                left: 200,\n                top: 0,\n                width: 100,\n                height: 100,\n                min: 50,\n                max: 100,\n                value: 50\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                id: \"crosshair\",\n                src: \"https://interactive-examples.mdn.mozilla.net/media/examples/crosshair.svg\",\n                style: {\n                  backgroundColor: \"red\",\n                  position: \"absolute\",\n                  left: \"calc(\" + (this.state.originX - 12) + \"px)\",\n                  top: \"calc(\" + (this.state.originY - 12) + \"px)\",\n                  opacity: \"1\"\n                },\n                width: \"24px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Buffer, {\n              x: 100,\n              y: 50,\n              triangle: {\n                min: 20,\n                max: 100,\n                value: 0\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Etap, {\n              x: 300,\n              y: 50\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Buffer, {\n              x: 570,\n              y: 50,\n              triangle: {\n                min: 60,\n                max: 100,\n                value: 0\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              id: \"crosshair\",\n              src: \"https://interactive-examples.mdn.mozilla.net/media/examples/crosshair.svg\",\n              style: {\n                position: \"absolute\",\n                left: \"calc(\" + (this.state.originX - 12) + \"px)\",\n                top: \"calc(\" + (this.state.originY - 12) + \"px)\",\n                opacity: \"1\"\n              },\n              width: \"24px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              id: \"crosshair\",\n              src: \"https://interactive-examples.mdn.mozilla.net/media/examples/crosshair.svg\",\n              style: {\n                position: \"absolute\",\n                left: \"calc(\" + (this.state.mouseX - 12) + \"px)\",\n                top: \"calc(\" + (this.state.mouseY - 12) + \"px)\",\n                opacity: \"1\"\n              },\n              width: \"24px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 22\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default MidleContent; //<h3>{context.activeObject.name ? context.activeObject.name : \"MidleContent\"}</h3>\n\n/*\n\nЕсть \"Заказ\".... \nУ заказа есть время его выполнения. Актуальное (текущее) оно динамически изменяется и По дефелту то которое было измеренно как константа.\nНапирмер: \"Велосипеды 5 штук\" или \"Самокат 10 штук\"....  \nУ каждого заказа есть \"Карта\". \n\nБуферы и Этапы для 1 карты могут быть не уникальные. К примеру Этап Сварки может быть у карты Велосипедов 5 штук и у самокатов 10 штук.\n\nКарта состоит из \"Буферов\" и \"Этапов\". Они связанны друг с другом (в целом карта показывает полностью производство велосипеда или самоката) \nПеред каждым Этапом есть Буфер.\nБуфер имеет какое то число деталей \"максимальное\", \"текущее\" и \"минимум\" который нужно удерживать, число \"частоты пополнения\"...  \"Время ожидания\"\nБуфер состоит из Заказов находящикся в ожидании (в очереде), Самый 1 в очереде идет на выполнение в Этап. \n\nЭтап состоит из :\n1) Времени цикла актуального и дефолтного измеренного как константа ( это число показывающее за сколько деталь будет произведенна на этом этапе)\n2) Время подготовки так же актуальное и дефолтное - это время константное которое нужно на переподготовку для другого заказа ( допустим Делали велики теперь самокаты , надо перенастроить оборудование вот это время показывает его перенастройку)\n3) Доступность - Это процент доступности оборудования или человека... (к примеру )\n4) Количество Людей или оборудования работающего на этом этапе. (какое то число оборудования или людей которые работают и производят деталь)\n5) Количество смен ( пока не знаю что это такое но пусть будет)\n\n*/","map":{"version":3,"sources":["/Users/sergeismogliuk/Documents/Project/Project_node/Diplom/react-diplom/react-diplom/src/components/Container/MidleContainer/MidleContent/MidleContent.js"],"names":["React","MidleContentStyle","DiagramViewBox","Triangle","Buffer","Etap","savePositionOnMouseDown","x","y","difference","mouseZoomPosition","pressTimer","undefined","longpress","countCLick","time","MidleContent","PureComponent","constructor","props","_showCard","context","ListActive","length","object","find","item","isSelected","console","log","name","getCoords","elem","box","getBoundingClientRect","pageYOffset","top","Math","round","left","handleOnWhell","e","target","targetCoords","originX","originY","scale","state","wheel","deltaY","zoom","clientX","clientY","setState","handleOnMouseMove","position","getTransformedPoint","button","DragPostion","isMetaKey","navigator","platform","match","metaKey","ctrlKey","transformedX","transformedY","handleOnClick","newX","newY","DIV","position2","divX","divY","handleMouseDown","window","setInterval","handleMouseUp","clearTimeout","handleDoubleClick","error","isLoaded","mouseX","mouseY","render","width","height","overflow","transformOrigin","transform","pointerEvents","boxShadow","backgroundColor","opacity","min","max","value"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,iBAAP,MAA8B,qBAA9B;AAEA,OAAOC,cAAP,MAA2B,kCAA3B,C,CAEA;;AAEA,OAAOC,QAAP,MAAqB,gCAArB;AAEA,OAAOC,MAAP,MAAmB,wBAAnB;AAEA,OAAOC,IAAP,MAAiB,oBAAjB;;AAEA,IAAKC,uBAAuB,GAAG;AAC7BC,EAAAA,CAAC,EAAE,CAD0B;AAE7BC,EAAAA,CAAC,EAAE;AAF0B,CAA/B;AAKA,IAAIC,UAAU,GAAG;AACfF,EAAAA,CAAC,EAAE,CADY;AAEfC,EAAAA,CAAC,EAAE;AAFY,CAAjB;AAKA,IAAIE,iBAAiB,GAAG;AACtBH,EAAAA,CAAC,EAAC,CADoB;AAEtBC,EAAAA,CAAC,EAAC;AAFoB,CAAxB;AAKA,IAAIG,UAAU,GAAGC,SAAjB;AACA,IAAIC,SAAS,GAAG;AACdC,EAAAA,UAAU,EAAE,CADE;AAEdC,EAAAA,IAAI,EAAE;AAFQ,CAAhB;;AAKA,MAAMC,YAAN,SAA2BhB,KAAK,CAACiB,aAAjC,CAA+C;AAC3CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA+BjBC,SA/BiB,GA+BL,MACZ;AACI,UAAG,KAAKC,OAAL,CAAaC,UAAb,CAAwBC,MAAxB,KAAmC,CAAtC,EACA;AACE,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAP;AACD;;AAED,UAAIC,MAAM,GAAG,KAAKH,OAAL,CAAaC,UAAb,CAAwBG,IAAxB,CAA6BC,IAAI,IAAIA,IAAI,CAACC,UAAL,KAAoB,IAAzD,CAAb;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAsC,KAAKR,OAA3C;AAIA,0BAAO;AAAA,kBAAKG,MAAM,CAACM;AAAZ;AAAA;AAAA;AAAA;AAAA,cAAP;AACH,KA7CgB;;AAAA,SA+CjBC,SA/CiB,GA+CJC,IAAD,IAAU;AACpB,UAAIC,GAAG,GAAGD,IAAI,CAACE,qBAAL,EAAV;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK5B,iBAAL,CAAuBkC,WAAnC;AACA,aAAO;AACLC,QAAAA,GAAG,EAAEC,IAAI,CAACC,KAAL,CAAWL,GAAG,CAACG,GAAf,CADA;AACqB;AAC1BG,QAAAA,IAAI,EAAEF,IAAI,CAACC,KAAL,CAAWL,GAAG,CAACM,IAAf,CAFD,CAEqB;;AAFrB,OAAP;AAID,KAtDgB;;AAAA,SAwDjBC,aAxDiB,GAwDAC,CAAD,IAChB;AACE;AACA,UAAIC,MAAM,GAAG,KAAKzC,iBAAlB,CAFF,CAEqC;;AACnC,UAAI0C,YAAY,GAAGD,MAAM,CAACR,qBAAP,EAAnB;AAEA,UAAIU,OAAJ;AACA,UAAIC,OAAJ;AAEA,UAAIC,KAAK,GAAG,KAAKC,KAAL,CAAWD,KAAvB;AAGA,YAAME,KAAK,GAAGP,CAAC,CAACQ,MAAF,GAAW,CAAX,GAAe,CAAf,GAAmB,CAAC,CAAlC,CAXF,CAaE;AAEA;;AACA,UAAIC,IAAJ,CAhBF,CAgBU;;AACRtB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBmB,KAAvB;;AACA,UAAGA,KAAK,GAAG,CAAX,EACA;AACEE,QAAAA,IAAI,GAAGJ,KAAK,GAAC,IAAb;;AACA,YAAGI,IAAI,GAAG,IAAV,EACA;AACEA,UAAAA,IAAI,GAAG,IAAP,CADF,CAGE;AACA;AACD,SAND,MAQA;AACEN,UAAAA,OAAO,GAAG,CAACH,CAAC,CAACU,OAAF,GAAYR,YAAY,CAACJ,IAA1B,IAAkCO,KAA5C;AACAD,UAAAA,OAAO,GAAG,CAACJ,CAAC,CAACW,OAAF,GAAYT,YAAY,CAACP,GAA1B,IAAiCU,KAA3C;AACD;AAGF,OAjBD,MAmBA;AAEEI,QAAAA,IAAI,GAAGJ,KAAK,GAAC,IAAb;AAEAF,QAAAA,OAAO,GAAG,CAACH,CAAC,CAACU,OAAF,GAAYR,YAAY,CAACJ,IAA1B,IAAkCO,KAA5C;AACAD,QAAAA,OAAO,GAAG,CAACJ,CAAC,CAACW,OAAF,GAAYT,YAAY,CAACP,GAA1B,IAAiCU,KAA3C;AAED;;AAKD,WAAKO,QAAL,CAAc;AAACP,QAAAA,KAAK,EAAEI,IAAR;AAAaN,QAAAA,OAAO,EAAElC,iBAAiB,CAACH,CAAxC;AAA2CsC,QAAAA,OAAO,EAAEnC,iBAAiB,CAACF;AAAtE,OAAd,EAjDF,CAiD4F;;AAE3F;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGO,KA9HgB;;AAAA,SAgIjB8C,iBAhIiB,GAgIIb,CAAD,IACpB;AACE,UAAIC,MAAM,GAAG,KAAKzC,iBAAlB;AACA,UAAIsD,QAAQ,GAAG,KAAKC,mBAAL,CAAyBd,MAAzB,EAAgCD,CAAC,CAACU,OAAlC,EAA0CV,CAAC,CAACW,OAA5C,EAAoD,KAAKL,KAAL,CAAWD,KAA/D,CAAf,CAFF,CAGE;;AACE,cAAOL,CAAC,CAACgB,MAAT;AAEE,aAAK,CAAL;AAEEhD,UAAAA,UAAU,GAAG;AACXF,YAAAA,CAAC,EAAID,uBAAuB,CAACC,CAAxB,GAA4BgD,QAAQ,CAAChD,CAD/B;AAEXC,YAAAA,CAAC,EAAIF,uBAAuB,CAACE,CAAxB,GAA4B+C,QAAQ,CAAC/C;AAF/B,WAAb,CAFF,CAME;;AACAoB,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBvB,uBAAxB,EAAiD,iBAAjD,EAAmEiD,QAAnE,EAA6E,SAA7E,EAAuF9C,UAAvF,EAAkG,UAAlG,EAA8G,KAAKsC,KAAL,CAAWD,KAAzH;AACA,eAAKO,QAAL,CAAc;AAACK,YAAAA,WAAW,EAAE;AAC1BnD,cAAAA,CAAC,EAAE,KAAKwC,KAAL,CAAWW,WAAX,CAAuBnD,CAAvB,GAAyBE,UAAU,CAACF,CADb;AAE1BC,cAAAA,CAAC,EAAE,KAAKuC,KAAL,CAAWW,WAAX,CAAuBlD,CAAvB,GAAyBC,UAAU,CAACD;AAFb;AAAd,WAAd;AAKA;;AACF;AACE,eAAK6C,QAAL,CAAc,CACZ;AACD;AAFa,WAAd;AAIA;AArBJ;;AAwBA3C,MAAAA,iBAAiB,GAAG;AAClBH,QAAAA,CAAC,EAAEgD,QAAQ,CAAChD,CADM;AAElBC,QAAAA,CAAC,EAAE+C,QAAQ,CAAC/C;AAFM,OAApB,CA5BJ,CAkCE;AACA;AACD,KArKgB;;AAAA,SAuKjBmD,SAvKiB,GAuKJlB,CAAD,IAAO;AACjB,aAAOmB,SAAS,CAACC,QAAV,CAAmBC,KAAnB,CAAyB,KAAzB,IAAkCrB,CAAC,CAACsB,OAApC,GAA8CtB,CAAC,CAACuB,OAAvD;AACD,KAzKgB;;AAAA,SA2KjBR,mBA3KiB,GA2KG,CAACd,MAAD,EAAQnC,CAAR,EAAWC,CAAX,EAAasC,KAAb,KAAsB;AACxC,UAAIH,YAAY,GAAGD,MAAM,CAACR,qBAAP,EAAnB;AACA,YAAM+B,YAAY,GAAG,CAAC1D,CAAC,GAAIoC,YAAY,CAACJ,IAAnB,IAA0BO,KAA/C,CAFwC,CAEc;;AACtD,YAAMoB,YAAY,GAAG,CAAC1D,CAAC,GAAImC,YAAY,CAACP,GAAnB,IAAyBU,KAA9C,CAHwC,CAGa;;AACrD,aAAO;AAAEvC,QAAAA,CAAC,EAAE0D,YAAL;AAAmBzD,QAAAA,CAAC,EAAE0D;AAAtB,OAAP;AACD,KAhLgB;;AAAA,SAmLjBC,aAnLiB,GAmLA1B,CAAD,IAAM;AAGpB;AACA,UAAIG,OAAJ;AACA,UAAIC,OAAJ;AAEA,UAAIuB,IAAJ;AACA,UAAIC,IAAJ;AAEA,UAAI3B,MAAM,GAAG,KAAKzC,iBAAlB;AAEA,UAAIsD,QAAQ,GAAG,KAAKC,mBAAL,CAAyBd,MAAzB,EAAgCD,CAAC,CAACU,OAAlC,EAA0CV,CAAC,CAACW,OAA5C,EAAoD,KAAKL,KAAL,CAAWD,KAA/D,CAAf;AAEA,UAAIH,YAAY,GAAG,KAAK2B,GAAL,CAASpC,qBAAT,EAAnB;AAEAN,MAAAA,OAAO,CAACC,GAAR,CAAYa,MAAM,CAACR,qBAAP,EAAZ,EAA2CS,YAA3C;AACA,UAAI4B,SAAS,GAAG;AACdhE,QAAAA,CAAC,EAAE,CAACkC,CAAC,CAACU,OAAF,GAAYR,YAAY,CAACJ,IAA1B,IAAkC,KAAKQ,KAAL,CAAWD,KADlC;AAEdtC,QAAAA,CAAC,EAAE,CAACiC,CAAC,CAACW,OAAF,GAAYT,YAAY,CAACP,GAA1B,IAAiC,KAAKW,KAAL,CAAWD;AAFjC,OAAhB;AAMAlB,MAAAA,OAAO,CAACC,GAAR,CAAY0B,QAAZ,EAAqBgB,SAArB,EAA+B;AAAChE,QAAAA,CAAC,EAACkC,CAAC,CAACU,OAAL;AAAa3C,QAAAA,CAAC,EAACiC,CAAC,CAACW;AAAjB,OAA/B;AAGAgB,MAAAA,IAAI,GAAGb,QAAQ,CAAChD,CAAhB;AACA8D,MAAAA,IAAI,GAAGd,QAAQ,CAAC/C,CAAhB;AAEAoC,MAAAA,OAAO,GAAG2B,SAAS,CAAChE,CAApB,CA7BoB,CA6BC;;AACrBsC,MAAAA,OAAO,GAAG0B,SAAS,CAAC/D,CAApB,CA9BoB,CA8BC;;AAIrB,WAAK6C,QAAL,CAAc;AAAE9C,QAAAA,CAAC,EAAE6D,IAAL;AAAW5D,QAAAA,CAAC,EAAE6D,IAAd;AAAoBzB,QAAAA,OAAO,EAAEA,OAA7B;AAAqCC,QAAAA,OAAO,EAAEA,OAA9C;AAAuD2B,QAAAA,IAAI,EAAE5B,OAA7D;AAAsE6B,QAAAA,IAAI,EAAE5B;AAA5E,OAAd,EAlCoB,CAkCkF;AACvG,KAtNgB;;AAAA,SAyNjB6B,eAzNiB,GAyNEjC,CAAD,IAAM;AAEtB,cAAOA,CAAC,CAACgB,MAAT;AAEE,aAAK,CAAL;AACE,cAAIf,MAAM,GAAG,KAAKzC,iBAAlB;AACAK,UAAAA,uBAAuB,GAAG,KAAKkD,mBAAL,CAAyBd,MAAzB,EAAgCD,CAAC,CAACU,OAAlC,EAA0CV,CAAC,CAACW,OAA5C,EAAoD,KAAKL,KAAL,CAAWD,KAA/D,CAA1B;AACAlB,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAiCvB,uBAAjC,EAAyDmC,CAAzD;AAEA5B,UAAAA,SAAS,CAACE,IAAV,GAAiB,CAAjB;AACAJ,UAAAA,UAAU,GAAGgE,MAAM,CAACC,WAAP,CAAmB,YAAU;AACxC;AACA/D,YAAAA,SAAS,CAACE,IAAV;AACC,WAHU,EAGT,GAHS,CAAb;AAIA;;AACF;AACE;AAdJ;AAkBD,KA7OgB;;AAAA,SA+OjB8D,aA/OiB,GA+OApC,CAAD,IAAM;AACpBb,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AAEAiD,MAAAA,YAAY,CAACnE,UAAD,CAAZ,CAHoB,CAGM;;AAC1BiB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBY,CAAC,CAACgB,MAAzB;;AAEA,cAAOhB,CAAC,CAACgB,MAAT;AAEE,aAAK,CAAL;AAAO;AAGL,oBAAO5C,SAAS,CAACC,UAAjB;AAEI,mBAAK,CAAL;AACE,oBAAGD,SAAS,CAACE,IAAV,GAAiB,CAApB,EACEF,SAAS,CAACC,UAAV;AACF;;AACF,mBAAK,CAAL;AACE,oBAAGD,SAAS,CAACE,IAAV,GAAiB,CAApB,EACA;AACEF,kBAAAA,SAAS,CAACC,UAAV,GAAuB,CAAvB;AACAD,kBAAAA,SAAS,CAACE,IAAV,GAAiB,CAAjB;AACAa,kBAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,uBAAKwB,QAAL,CAAc;AAACP,oBAAAA,KAAK,EAAE,CAAR;AAAUF,oBAAAA,OAAO,EAAE,CAAnB;AAAsBC,oBAAAA,OAAO,EAAE,CAA/B;AACZa,oBAAAA,WAAW,EAAE;AACXnD,sBAAAA,CAAC,EAAE,CADQ;AAEXC,sBAAAA,CAAC,EAAE;AAFQ;AADD,mBAAd;AAKD;;AACD;;AACF;AACI;AApBR;;AAsBAK,YAAAA,SAAS,CAACE,IAAV,GAAiB,CAAjB;AAEA;AACD;AA9BH;AAiCD,KAtRgB;;AAAA,SAwRjBgE,iBAxRiB,GAwRItC,CAAD,IAAK,CACvB;AACD,KA1RgB;;AAEf,SAAKM,KAAL,GAAa;AACXiC,MAAAA,KAAK,EAAE,IADI;AAEXC,MAAAA,QAAQ,EAAE,KAFC;AAGXnC,MAAAA,KAAK,EAAE,CAHI;AAIXvC,MAAAA,CAAC,EAAE,CAJQ;AAKXC,MAAAA,CAAC,EAAE,CALQ;AAMXoC,MAAAA,OAAO,EAAE,CANE;AAOXC,MAAAA,OAAO,EAAE,CAPE;AAQXa,MAAAA,WAAW,EAAE;AAACnD,QAAAA,CAAC,EAAE,CAAJ;AAAMC,QAAAA,CAAC,EAAE;AAAT,OARF;AAWXgE,MAAAA,IAAI,EAAE,CAXK;AAYXC,MAAAA,IAAI,EAAE,CAZK;AAgBXS,MAAAA,MAAM,EAAE,CAhBG;AAiBXC,MAAAA,MAAM,EAAE;AAjBG,KAAb;AAmBD;;AAuQD;AACA;AACA;AACA;AACA;AACAC,EAAAA,MAAM,GAAG;AACP,wBACI,QAAC,iBAAD;AAAA,6BACI;AAAK,QAAA,KAAK,EAAE;AAACC,UAAAA,KAAK,EAAE,MAAR;AAAgBC,UAAAA,MAAM,EAAE,MAAxB;AAA+B/B,UAAAA,QAAQ,EAAE,UAAzC;AAAoDgC,UAAAA,QAAQ,EAAE;AAA9D,SAAZ;AAAA,+BAEE;AAAM,UAAA,GAAG,EAAGjB,GAAD,IAAS;AAAE,iBAAKA,GAAL,GAAWA,GAAX;AAAgB,WAAtC;AAAwC,UAAA,aAAa,EAAE,KAAKS,iBAA5D;AAAiF,UAAA,OAAO,EAAE,KAAKZ,aAA/F;AAA8G,UAAA,WAAW,EAAE,KAAKO,eAAhI;AAAiJ,UAAA,SAAS,EAAE,KAAKG,aAAjK;AAAgL,UAAA,WAAW,EAAE,KAAKvB,iBAAlM;AAAqN,UAAA,OAAO,EAAE,KAAKd,aAAnO;AAAqP,UAAA,KAAK,EAAE;AAAC6C,YAAAA,KAAK,EAAE,MAAR;AAAgBC,YAAAA,MAAM,EAAE,MAAxB;AAA+B/B,YAAAA,QAAQ,EAAE;AAAzC,WAA5P;AAAA,iCACE;AAAM,YAAA,GAAG,EAAGtD,iBAAD,IAAuB;AAAE,mBAAKA,iBAAL,GAAyBA,iBAAzB;AAA6C,aAAjF;AAAoF,YAAA,KAAK,EAAE;AAACsD,cAAAA,QAAQ,EAAE,UAAX;AACvF8B,cAAAA,KAAK,EAAG,IAAD,GAAO,IADyE;AAEvFC,cAAAA,MAAM,EAAG,IAAD,GAAO,IAFwE;AAGvFlD,cAAAA,GAAG,EAAE,KAHkF;AAIvFG,cAAAA,IAAI,EAAE,KAJiF;AAKvFiD,cAAAA,eAAe,EAAE,KAAKzC,KAAL,CAAWH,OAAX,GAAmB,KAAnB,GAAyB,KAAKG,KAAL,CAAWF,OAApC,GAA4C,IAL0B;AAMvF;AACA4C,cAAAA,SAAS,EAAE,eAAa,KAAK1C,KAAL,CAAWW,WAAX,CAAuBnD,CAApC,GAAsC,MAAtC,GAA6C,KAAKwC,KAAL,CAAWW,WAAX,CAAuBlD,CAApE,GAAsE,YAAtE,GAAmF,KAAKuC,KAAL,CAAWD,KAA9F,GAAoG,GAPxB;AAQvF4C,cAAAA,aAAa,EAAE;AARwE,aAA3F;AAAA,oCASE;AAAK,cAAA,KAAK,EAAE;AACRL,gBAAAA,KAAK,EAAE,OADC;AAERjD,gBAAAA,GAAG,EAAG,OAAK,CAAN,GAAS,IAFN;AAGRG,gBAAAA,IAAI,EAAG,OAAK,CAAN,GAAS,IAHP;AAIRmD,gBAAAA,aAAa,EAAE,KAJP;AAKRnC,gBAAAA,QAAQ,EAAE,UALF;AAMRoC,gBAAAA,SAAS,EAAE,sGANH,CAOR;;AAPQ,eAAZ;AAAA,sCAYA,QAAC,QAAD;AAAY,gBAAA,IAAI,EAAE,GAAlB;AAAuB,gBAAA,GAAG,EAAE,GAA5B;AAAiC,gBAAA,KAAK,EAAE,GAAxC;AAA6C,gBAAA,MAAM,EAAE,GAArD;AAA0D,gBAAA,GAAG,EAAE,EAA/D;AAAmE,gBAAA,GAAG,EAAE,GAAxE;AAA6E,gBAAA,KAAK,EAAE;AAApF;AAAA;AAAA;AAAA;AAAA,sBAZA,eAaA,QAAC,QAAD;AAAY,gBAAA,IAAI,EAAE,GAAlB;AAAuB,gBAAA,GAAG,EAAE,CAA5B;AAAgC,gBAAA,KAAK,EAAE,GAAvC;AAA4C,gBAAA,MAAM,EAAE,GAApD;AAAyD,gBAAA,GAAG,EAAE,EAA9D;AAAkE,gBAAA,GAAG,EAAE,GAAvE;AAA4E,gBAAA,KAAK,EAAE;AAAnF;AAAA;AAAA;AAAA;AAAA,sBAbA,eAgBA;AAAK,gBAAA,EAAE,EAAC,WAAR;AAAoB,gBAAA,GAAG,EAAC,2EAAxB;AAAoG,gBAAA,KAAK,EAAE;AAACC,kBAAAA,eAAe,EAAE,KAAlB;AAAyBrC,kBAAAA,QAAQ,EAAE,UAAnC;AAA8ChB,kBAAAA,IAAI,EAAE,WAAS,KAAKQ,KAAL,CAAWH,OAAX,GAAmB,EAA5B,IAAgC,KAApF;AAA2FR,kBAAAA,GAAG,EAAE,WAAS,KAAKW,KAAL,CAAWF,OAAX,GAAmB,EAA5B,IAAgC,KAAhI;AAAsIgD,kBAAAA,OAAO,EAAE;AAA/I,iBAA3G;AAAgQ,gBAAA,KAAK,EAAC;AAAtQ;AAAA;AAAA;AAAA;AAAA,sBAhBA;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF,eA4BE,QAAC,MAAD;AAAQ,cAAA,CAAC,EAAE,GAAX;AAAgB,cAAA,CAAC,EAAE,EAAnB;AAAuB,cAAA,QAAQ,EAAE;AAACC,gBAAAA,GAAG,EAAE,EAAN;AAAUC,gBAAAA,GAAG,EAAE,GAAf;AAAoBC,gBAAAA,KAAK,EAAE;AAA3B;AAAjC;AAAA;AAAA;AAAA;AAAA,oBA5BF,eA8BE,QAAC,IAAD;AAAM,cAAA,CAAC,EAAE,GAAT;AAAc,cAAA,CAAC,EAAE;AAAjB;AAAA;AAAA;AAAA;AAAA,oBA9BF,eAgCE,QAAC,MAAD;AAAQ,cAAA,CAAC,EAAE,GAAX;AAAgB,cAAA,CAAC,EAAE,EAAnB;AAAuB,cAAA,QAAQ,EAAE;AAACF,gBAAAA,GAAG,EAAE,EAAN;AAAUC,gBAAAA,GAAG,EAAE,GAAf;AAAoBC,gBAAAA,KAAK,EAAE;AAA3B;AAAjC;AAAA;AAAA;AAAA;AAAA,oBAhCF,eAsCE;AAAK,cAAA,EAAE,EAAC,WAAR;AAAoB,cAAA,GAAG,EAAC,2EAAxB;AAAoG,cAAA,KAAK,EAAE;AAACzC,gBAAAA,QAAQ,EAAE,UAAX;AAAsBhB,gBAAAA,IAAI,EAAE,WAAS,KAAKQ,KAAL,CAAWH,OAAX,GAAmB,EAA5B,IAAgC,KAA5D;AAAmER,gBAAAA,GAAG,EAAE,WAAS,KAAKW,KAAL,CAAWF,OAAX,GAAmB,EAA5B,IAAgC,KAAxG;AAA8GgD,gBAAAA,OAAO,EAAE;AAAvH,eAA3G;AAAwO,cAAA,KAAK,EAAC;AAA9O;AAAA;AAAA;AAAA;AAAA,oBAtCF,eAuCC;AAAK,cAAA,EAAE,EAAC,WAAR;AAAoB,cAAA,GAAG,EAAC,2EAAxB;AAAoG,cAAA,KAAK,EAAE;AAACtC,gBAAAA,QAAQ,EAAE,UAAX;AAAsBhB,gBAAAA,IAAI,EAAE,WAAS,KAAKQ,KAAL,CAAWmC,MAAX,GAAkB,EAA3B,IAA+B,KAA3D;AAAkE9C,gBAAAA,GAAG,EAAC,WAAS,KAAKW,KAAL,CAAWoC,MAAX,GAAkB,EAA3B,IAA+B,KAArG;AAA2GU,gBAAAA,OAAO,EAAE;AAApH,eAA3G;AAAqO,cAAA,KAAK,EAAC;AAA3O;AAAA;AAAA;AAAA;AAAA,oBAvCD;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAgED;;AAnWwC;;AAwW/C,eAAe7E,YAAf,C,CAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React from \"react\";\n\nimport MidleContentStyle from \"./MidleContentStyle\"\n\nimport DiagramViewBox from \"../../../Diagrams/DiagramViewBox\"\n\n//import  {ListActiveConxtext} from \"../../../../ListActiveContextProvider\"\n\nimport Triangle from \"../../../SVG/Triangle/Triangle\"\n\nimport Buffer from \"../../../Buffer/Buffer\"\n\nimport Etap from \"../../../Etap/Etap\"\n\nvar  savePositionOnMouseDown = {\n  x: 0,\n  y: 0\n};\n\nvar difference = {\n  x: 0,\n  y: 0\n}\n\nvar mouseZoomPosition = {\n  x:0,\n  y:0\n}\n\nvar pressTimer = undefined;\nvar longpress = { \n  countCLick: 0,\n  time: 0\n};\n\nclass MidleContent extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n          error: null,\n          isLoaded: false,\n          scale: 1,\n          x: 0,\n          y: 0,\n          originX: 0,\n          originY: 0,\n          DragPostion: {x: 0,y: 0},\n\n\n          divX: 0,\n          divY: 0,\n\n\n\n          mouseX: 0,\n          mouseY: 0\n        };\n      }\n\n      static MidleContentStyle;\n\n      static DIV;\n\n      \n\n      //static contextType = ListActiveConxtext;\n\n      _showCard = () =>\n      {\n          if(this.context.ListActive.length === 0)\n          {\n            return <h3>MidleContent</h3>\n          }\n\n          let object = this.context.ListActive.find(item => item.isSelected === true)\n\n          console.log(\"this._showCard(context)\",this.context)\n\n     \n\n          return <h3>{object.name}</h3>\n      }\n\n      getCoords = (elem) => {\n        let box = elem.getBoundingClientRect();\n        console.log(this.MidleContentStyle.pageYOffset)\n        return {\n          top: Math.round(box.top), //pageYOffset\n          left: Math.round(box.left)//pageXOffset\n        };\n      }\n\n      handleOnWhell = (e) =>\n      {\n        //let count = (e.deltaY/17)\n        let target = this.MidleContentStyle//e.target.closest('....'); // Здесь что-то уникальное, что может указать на род. блок\n        let targetCoords = target.getBoundingClientRect();\n\n        let originX;\n        let originY\n\n        let scale = this.state.scale\n\n\n        const wheel = e.deltaY < 0 ? 1 : -1;\n\n        //e.preventDefault()\n\n        // Compute zoom factor.\n        let zoom// = Math.exp(wheel * this.state.scale);\n        console.log(\"wheel = \",wheel)\n        if(wheel > 0)\n        {\n          zoom = scale-0.05\n          if(zoom < 0.65 )\n          {\n            zoom = 0.65;\n\n            //originX = 0;\n            //originY = 0;\n          }\n          else\n          {\n            originX = (e.clientX - targetCoords.left )/ scale;\n            originY = (e.clientY - targetCoords.top )/ scale;\n          }\n\n          \n        }\n        else\n        {\n          \n          zoom = scale+0.05\n\n          originX = (e.clientX - targetCoords.left )/ scale;\n          originY = (e.clientY - targetCoords.top )/ scale;\n          \n        }\n\n\n      \n\n        this.setState({scale: zoom,originX: mouseZoomPosition.x ,originY: mouseZoomPosition.y  }) //,x: e.screenX, y: e.screenY\n\n       /* switch (e.deltaY > 0) {\n            case true:\n              console.log('positive',e.deltaY,count);\n              let plus = this.state.scale+0.05\n\n              this.setState({scale: zoom,originX: -originX, originY: -originY }) //,x: xCoord, y: yCoord\n              break;\n            default:\n              console.log('negative',e.deltaY,count);\n              count *=(-1)\n\n              let minus = this.state.scale-0.05\n              if(minus < 0 )\n              {\n                minus = 0\n              }\n              \n          }*/\n      }\n\n      handleOnMouseMove = (e) =>\n      {\n        let target = this.MidleContentStyle;\n        let position = this.getTransformedPoint(target,e.clientX,e.clientY,this.state.scale)\n        //let difference = 0;\n          switch(e.button)\n          {\n            case 1:\n              \n              difference = {\n                x : (savePositionOnMouseDown.x - position.x  ),\n                y : (savePositionOnMouseDown.y - position.y  )\n              }\n              //console.log(\"handleOnMouseMove = \",difference,e,e.buttons)\n              console.log(\"origin = \",savePositionOnMouseDown, \" newPosition = \",position, \" dif = \",difference,\"Scale = \", this.state.scale)\n              this.setState({DragPostion: {\n                x: this.state.DragPostion.x-difference.x,\n                y: this.state.DragPostion.y-difference.y},\n              },\n             );\n              break;\n            default:\n              this.setState({\n                //originX: position.x ,\n               // originY: position.y \n              });\n              break;\n          }\n\n          mouseZoomPosition = {\n            x: position.x,\n            y: position.y\n          }\n\n     \n        //console.log(target.getBoundingClientRect(),\"pos =\",position )\n        //this.setState({ mouseX: position.x, mouseY: position.y,originX: difference.x,originY: difference.y });\n      }\n\n      isMetaKey = (e) => {\n        return navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey\n      }\n\n      getTransformedPoint=(target,x, y,scale)=> {\n        let targetCoords = target.getBoundingClientRect();\n        const transformedX = (x  - targetCoords.left)/ scale; //target.firstChild.scrollLeft\n        const transformedY = (y  - targetCoords.top)/ scale; //target.firstChild.scrollTop\n        return { x: transformedX, y: transformedY };\n      }\n\n\n      handleOnClick = (e) =>{\n\n     \n        return;\n        let originX;\n        let originY;\n\n        let newX;\n        let newY;\n\n        let target = this.MidleContentStyle;\n\n        let position = this.getTransformedPoint(target,e.clientX,e.clientY,this.state.scale)\n       \n        let targetCoords = this.DIV.getBoundingClientRect();\n\n        console.log(target.getBoundingClientRect(),targetCoords)\n        let position2 = {\n          x: (e.clientX - targetCoords.left )/ this.state.scale,\n          y: (e.clientY - targetCoords.top )/ this.state.scale\n        }\n\n\n        console.log(position,position2,{x:e.clientX,y:e.clientY})\n        \n\n        newX = position.x;\n        newY = position.y;\n\n        originX = position2.x//*this.state.scale;\n        originY = position2.y//*this.state.scale;\n\n\n\n        this.setState({ x: newX, y: newY, originX: originX,originY: originY, divX: originX, divY: originY }); //\n      }\n\n\n      handleMouseDown = (e) =>{\n\n        switch(e.button)\n        {\n          case 1:\n            let target = this.MidleContentStyle;\n            savePositionOnMouseDown = this.getTransformedPoint(target,e.clientX,e.clientY,this.state.scale)\n            console.log(\"handleMouseDown = \",savePositionOnMouseDown,e)\n\n            longpress.time = 0;\n            pressTimer = window.setInterval(function(){\n              // your code here\n              longpress.time++;\n              },100)\n            break;\n          default:\n            break;\n        }\n        \n       \n      }\n\n      handleMouseUp = (e) =>{\n        console.log(\"handleMouseUp\")\n        \n        clearTimeout(pressTimer); //clear time on mouseup\n        console.log(\"click = \",e.button)\n\n        switch(e.button)\n        {\n          case 1:{\n           \n\n            switch(longpress.countCLick)\n            {\n                case 0:\n                  if(longpress.time < 2)\n                    longpress.countCLick++;\n                  break;\n                case 1:\n                  if(longpress.time < 2)\n                  {\n                    longpress.countCLick = 0;\n                    longpress.time = 0;\n                    console.log(\"DOUBLE CLICK\")\n                    this.setState({scale: 1,originX: 0, originY: 0,\n                      DragPostion: {\n                        x: 0,\n                        y: 0},\n                    })\n                  }\n                  break;\n                default:\n                    break\n            }\n            longpress.time = 0;\n            \n            break;\n          }\n        }\n\n      }\n\n      handleDoubleClick = (e)=>{\n        //console.log(\" handleDoubleClick click = \",e.button)\n      }\n\n      //translate(\"+this.state.x+\"px,\"+this.state.y+\"px)\n      //transformOrigin:this.state.xScale+\"px \"+this.state.yScale+\"px\"\n      //transformOrigin:this.state.originX+\"px \"+this.state.originY+\"px\",\n      //  \"scale(\"+this.state.scale+\")\"\n      //overflow: \"auto\"\n      render() {\n        return (\n            <MidleContentStyle >\n                <div style={{width: \"100%\", height: \"100%\",position: \"relative\",overflow: \"hidden\"}}   >\n                  {/*<div  onClick={this.handleOnClick}  onMouseMove={this.handleOnMouseMove} onWheel={this.handleOnWhell}  ref={(MidleContentStyle) => { this.MidleContentStyle = MidleContentStyle;}} style={{width: \"100%\", height: \"100%\",position: \"absolute\",transformOrigin: this.state.originX+\"px \"+this.state.originY+\"px\",transform:\"scale(\"+this.state.scale+\")\",boxShadow: \"rgba(0,0,0,0.2) 0px 3px 5px -1px,rgba(0,0,0,0.14) 0px 6px 10px 0px,rgba(0,0,0,0.12) 0px 1px 14px 0px\"}}>*/}\n                  <div  ref={(DIV) => { this.DIV = DIV;}} onDoubleClick={this.handleDoubleClick}   onClick={this.handleOnClick} onMouseDown={this.handleMouseDown} onMouseUp={this.handleMouseUp} onMouseMove={this.handleOnMouseMove} onWheel={this.handleOnWhell}    style={{width: \"100%\", height: \"100%\",position: \"absolute\"}}>\n                    <div  ref={(MidleContentStyle) => { this.MidleContentStyle = MidleContentStyle; }}  style={{position: \"absolute\",\n                        width: (1411)+\"px\",\n                        height: (1100)+\"px\",\n                        top: \"0px\",\n                        left: \"0px\",\n                        transformOrigin: this.state.originX+\"px \"+this.state.originY+\"px\",\n                        //transformOrigin:\"0px 0px\",\n                        transform: \"translate(\"+this.state.DragPostion.x+\"px, \"+this.state.DragPostion.y+\"px) scale(\"+this.state.scale+\")\",\n                        pointerEvents: \"all\"}}>\n                      <div style={{\n                          width: \"500px\",\n                          top: (1411/2)+\"px\",\n                          left: (1100/2)+\"px\",\n                          pointerEvents: \"all\",\n                          position: \"absolute\",\n                          boxShadow: \"rgba(0,0,0,0.2) 0px 3px 5px -1px,rgba(0,0,0,0.14) 0px 6px 10px 0px,rgba(0,0,0,0.12) 0px 1px 14px 0px\",\n                          //transform: \"translate(\"+this.state.originX+\"px, \"+this.state.originY+\"px) scale(\"+this.state.scale+\")\"\n                        \n                          }}\n                          > \n\n                      <Triangle   left={200} top={200} width={100} height={100} min={50} max={100} value={0}/>\n                      <Triangle   left={200} top={0}  width={100} height={100} min={50} max={100} value={50}/>\n                      {/*\n                      <img id=\"crosshair\" src=\"https://interactive-examples.mdn.mozilla.net/media/examples/crosshair.svg\" style={{ backgroundColor:\"green\",position: \"absolute\",left: \"calc(\"+(this.state.originX-12)+\"px)\", top: \"calc(\"+(this.state.originY-12)+\"px)\",opacity: \"1\"}} width=\"24px\"></img>*/}\n                      <img id=\"crosshair\" src=\"https://interactive-examples.mdn.mozilla.net/media/examples/crosshair.svg\" style={{backgroundColor: \"red\", position: \"absolute\",left: \"calc(\"+(this.state.originX-12)+\"px)\", top: \"calc(\"+(this.state.originY-12)+\"px)\",opacity: \"1\"}} width=\"24px\"></img>\n                      </div>\n\n                      <Buffer x={100} y={50} triangle={{min: 20, max: 100, value: 0}}/>\n\n                      <Etap x={300} y={50}/>\n\n                      <Buffer x={570} y={50} triangle={{min: 60, max: 100, value: 0}}/>\n\n                    \n\n\n                      \n                      <img id=\"crosshair\" src=\"https://interactive-examples.mdn.mozilla.net/media/examples/crosshair.svg\" style={{position: \"absolute\",left: \"calc(\"+(this.state.originX-12)+\"px)\", top: \"calc(\"+(this.state.originY-12)+\"px)\",opacity: \"1\"}} width=\"24px\"></img>\n                     <img id=\"crosshair\" src=\"https://interactive-examples.mdn.mozilla.net/media/examples/crosshair.svg\" style={{position: \"absolute\",left: \"calc(\"+(this.state.mouseX-12)+\"px)\", top:\"calc(\"+(this.state.mouseY-12)+\"px)\",opacity: \"1\"}} width=\"24px\"></img>\n                    </div>\n                  </div>\n    \n         \n                 \n                </div>\n\n\n               {/* <DiagramViewBox/>\n\n              <ListActiveConxtext.Consumer>\n                {value => (\n                  <h3>MidleContent {console.log(value.ListActive)}</h3>\n                )}\n                \n                </ListActiveConxtext.Consumer>*/} \n            </MidleContentStyle>\n\n        )\n      }\n}\n\n\n\nexport default MidleContent;\n\n//<h3>{context.activeObject.name ? context.activeObject.name : \"MidleContent\"}</h3>\n\n/*\n\nЕсть \"Заказ\".... \nУ заказа есть время его выполнения. Актуальное (текущее) оно динамически изменяется и По дефелту то которое было измеренно как константа.\nНапирмер: \"Велосипеды 5 штук\" или \"Самокат 10 штук\"....  \nУ каждого заказа есть \"Карта\". \n\nБуферы и Этапы для 1 карты могут быть не уникальные. К примеру Этап Сварки может быть у карты Велосипедов 5 штук и у самокатов 10 штук.\n\nКарта состоит из \"Буферов\" и \"Этапов\". Они связанны друг с другом (в целом карта показывает полностью производство велосипеда или самоката) \nПеред каждым Этапом есть Буфер.\nБуфер имеет какое то число деталей \"максимальное\", \"текущее\" и \"минимум\" который нужно удерживать, число \"частоты пополнения\"...  \"Время ожидания\"\nБуфер состоит из Заказов находящикся в ожидании (в очереде), Самый 1 в очереде идет на выполнение в Этап. \n\nЭтап состоит из :\n1) Времени цикла актуального и дефолтного измеренного как константа ( это число показывающее за сколько деталь будет произведенна на этом этапе)\n2) Время подготовки так же актуальное и дефолтное - это время константное которое нужно на переподготовку для другого заказа ( допустим Делали велики теперь самокаты , надо перенастроить оборудование вот это время показывает его перенастройку)\n3) Доступность - Это процент доступности оборудования или человека... (к примеру )\n4) Количество Людей или оборудования работающего на этом этапе. (какое то число оборудования или людей которые работают и производят деталь)\n5) Количество смен ( пока не знаю что это такое но пусть будет)\n\n*/"]},"metadata":{},"sourceType":"module"}